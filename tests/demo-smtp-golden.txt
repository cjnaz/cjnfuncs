
Stats for set_toolname <cjnfuncs_testsmtp>:
.toolname         :  cjnfuncs_testsmtp
.main_module      :  <module '__main__' from '/mnt/share/dev/packages/cjnfuncs/tests/./demo-smtp.py'>
.main_full_path   :  /mnt/share/dev/packages/cjnfuncs/tests/demo-smtp.py
.main_dir         :  /mnt/share/dev/packages/cjnfuncs/tests
General user and site paths:
.user_config_dir  :  /home/cjn/.config/cjnfuncs_testsmtp
.user_data_dir    :  /home/cjn/.local/share/cjnfuncs_testsmtp
.user_state_dir   :  /home/cjn/.local/state/cjnfuncs_testsmtp
.user_cache_dir   :  /home/cjn/.cache/cjnfuncs_testsmtp
.user_log_dir     :  /home/cjn/.cache/cjnfuncs_testsmtp/log
.site_config_dir  :  /etc/xdg/cjnfuncs_testsmtp
.site_data_dir    :  /usr/share/cjnfuncs_testsmtp
Based on found user or site dirs:
.env_defined      :  user
.config_dir       :  /home/cjn/.config/cjnfuncs_testsmtp
.data_dir         :  /home/cjn/.local/share/cjnfuncs_testsmtp
.state_dir        :  /home/cjn/.local/state/cjnfuncs_testsmtp
.cache_dir        :  /home/cjn/.cache/cjnfuncs_testsmtp
.log_dir_base     :  /home/cjn/.local/share/cjnfuncs_testsmtp
.log_dir          :  None
.log_file         :  None
.log_full_path    :  __console__

Load config /home/cjn/.config/cjnfuncs_testsmtp/demo_smtp.cfg
      demo-smtp.dotest               -  WARNING:  

==============================================================================================
Test 1 - body to EmailTo, logged
  GIVEN:      (), {'to': 'EmailTo', 'body': 'To be, or not to be...', 'log': True}
  EXPECT:     email send success, return None
           SMTP.snd_email            -    DEBUG:  Initialize the SMTP server connection for port <p587tls>
           SMTP.snd_email            -    DEBUG:  Start TLS
           SMTP.snd_email            -    DEBUG:  Logging into SMTP server
           SMTP.snd_email            -    DEBUG:  Sending message <1: body to EmailTo, logged>
           SMTP.snd_email            -  WARNING:  Email sent <1: body to EmailTo, logged>
      demo-smtp.dotest               -  WARNING:    RETURNED:
None
      demo-smtp.dotest               -  WARNING:  

==============================================================================================
Test 2 - body to EmailTo - not logged
  GIVEN:      (), {'to': 'EmailTo', 'body': 'To be, or not to be...'}
  EXPECT:     email send success, not logged, return None
           SMTP.snd_email            -    DEBUG:  Initialize the SMTP server connection for port <p587tls>
           SMTP.snd_email            -    DEBUG:  Start TLS
           SMTP.snd_email            -    DEBUG:  Logging into SMTP server
           SMTP.snd_email            -    DEBUG:  Sending message <2: body to EmailTo - not logged>
           SMTP.snd_email            -    DEBUG:  Email sent <2: body to EmailTo - not logged>
      demo-smtp.dotest               -  WARNING:    RETURNED:
None
      demo-smtp.dotest               -  WARNING:  

==============================================================================================
Test 3 - filename to EmailTo - not logged
  GIVEN:      (), {'to': 'EmailTo', 'filename': PosixPath('/home/cjn/.config/cjnfuncs_testsmtp/testfile.txt')}
  EXPECT:     email send success, not logged, return None
           SMTP.snd_email            -    DEBUG:  Initialize the SMTP server connection for port <p587tls>
           SMTP.snd_email            -    DEBUG:  Start TLS
           SMTP.snd_email            -    DEBUG:  Logging into SMTP server
           SMTP.snd_email            -    DEBUG:  Sending message <3: filename to EmailTo - not logged>
           SMTP.snd_email            -    DEBUG:  Email sent <3: filename to EmailTo - not logged>
      demo-smtp.dotest               -  WARNING:    RETURNED:
None
      demo-smtp.dotest               -  WARNING:  

==============================================================================================
Test 4 - htmlfile to EmailTo
  GIVEN:      (), {'htmlfile': 'testfile.html', 'to': 'EmailTo', 'log': True}
  EXPECT:     email send success, logged, return None
           SMTP.snd_email            -    DEBUG:  Initialize the SMTP server connection for port <p587tls>
           SMTP.snd_email            -    DEBUG:  Start TLS
           SMTP.snd_email            -    DEBUG:  Logging into SMTP server
           SMTP.snd_email            -    DEBUG:  Sending message <4: htmlfile to EmailTo>
           SMTP.snd_email            -  WARNING:  Email sent <4: htmlfile to EmailTo>
      demo-smtp.dotest               -  WARNING:    RETURNED:
None
      demo-smtp.dotest               -  WARNING:  

==============================================================================================
Test 5 - body to EmailToMulti
  GIVEN:      (), {'body': 'To be, or not to be...', 'to': 'EmailToMulti', 'log': True}
  EXPECT:     email send success, logged, return None
           SMTP.snd_email            -    DEBUG:  Initialize the SMTP server connection for port <p587tls>
           SMTP.snd_email            -    DEBUG:  Start TLS
           SMTP.snd_email            -    DEBUG:  Logging into SMTP server
           SMTP.snd_email            -    DEBUG:  Sending message <5: body to EmailToMulti>
           SMTP.snd_email            -  WARNING:  Email sent <5: body to EmailToMulti>
      demo-smtp.dotest               -  WARNING:    RETURNED:
None
      demo-smtp.dotest               -  WARNING:  

==============================================================================================
Test 6 - No such file nofile.txt
  GIVEN:      (), {'filename': 'nofile.txt', 'to': 'EmailTo', 'log': True}
  EXPECT:     SndEmailError... [Errno 2] No such file or directory: '/home/cjn/.cache/cjnfuncs_testsmtp/nofile.txt'
      demo-smtp.dotest               -    ERROR:  
  RAISED:     SndEmailError: snd_email - Message subject <6: No such file nofile.txt>:  Failed to load </home/cjn/.cache/cjnfuncs_testsmtp/nofile.txt>.
  [Errno 2] No such file or directory: '/home/cjn/.cache/cjnfuncs_testsmtp/nofile.txt'
      demo-smtp.dotest               -  WARNING:  

==============================================================================================
Test 7 - No to=
  GIVEN:      (), {'body': 'Hello'}
  EXPECT:     TypeError: snd_email() missing 1 required positional argument: 'to'
      demo-smtp.dotest               -    ERROR:  
  RAISED:     TypeError: snd_email() missing 1 required positional argument: 'to'
      demo-smtp.dotest               -  WARNING:  

==============================================================================================
Test 8 - Invalid to=
  GIVEN:      (), {'body': 'Hello', 'to': 'me@example.com, junkAtexample.com', 'log': True}
  EXPECT:     SndEmailError: Message subject <8: Invalid to=>:  <junkAtexample.com> is not a valid email address
      demo-smtp.dotest               -    ERROR:  
  RAISED:     SndEmailError: Message subject <8: Invalid to=>:  <junkAtexample.com> is not a valid email address
      demo-smtp.dotest               -  WARNING:  

==============================================================================================
Test 9 - snd_notif to= defaults to cfg["NotifList"]
  GIVEN:      (), {'msg': 'This is the message body'}
  EXPECT:     notif send success, not logged, return None
           SMTP.snd_email            -    DEBUG:  Initialize the SMTP server connection for port <p587tls>
           SMTP.snd_email            -    DEBUG:  Start TLS
           SMTP.snd_email            -    DEBUG:  Logging into SMTP server
           SMTP.snd_email            -    DEBUG:  Sending message <9: snd_notif to= defaults to cfg["NotifList"]>
           SMTP.snd_email            -    DEBUG:  Email sent <9: snd_notif to= defaults to cfg["NotifList"]>
           SMTP.snd_notif            -    DEBUG:  Notification sent <9: snd_notif to= defaults to cfg["NotifList"]> <This is the message body>
      demo-smtp.dotest               -  WARNING:    RETURNED:
None
      demo-smtp.dotest               -  WARNING:  

==============================================================================================
Test 10 - snd_notif logged
  GIVEN:      (), {'msg': 'This is another message body', 'log': True}
  EXPECT:     notif send success, logged, return None
           SMTP.snd_email            -    DEBUG:  Initialize the SMTP server connection for port <p587tls>
           SMTP.snd_email            -    DEBUG:  Start TLS
           SMTP.snd_email            -    DEBUG:  Logging into SMTP server
           SMTP.snd_email            -    DEBUG:  Sending message <10: snd_notif logged>
           SMTP.snd_email            -    DEBUG:  Email sent <10: snd_notif logged>
           SMTP.snd_notif            -  WARNING:  Notification sent <10: snd_notif logged> <This is another message body>
      demo-smtp.dotest               -  WARNING:    RETURNED:
None
      demo-smtp.dotest               -  WARNING:  

==============================================================================================
Test 11 - This is another test subject
  GIVEN:      (), {'msg': 'This is another message body', 'to': 'EmailTo', 'log': True}
  EXPECT:     notif send success, not logged, return None
           SMTP.snd_email            -    DEBUG:  Initialize the SMTP server connection for port <p587tls>
           SMTP.snd_email            -    DEBUG:  Start TLS
           SMTP.snd_email            -    DEBUG:  Logging into SMTP server
           SMTP.snd_email            -    DEBUG:  Sending message <11: This is another test subject>
           SMTP.snd_email            -    DEBUG:  Email sent <11: This is another test subject>
           SMTP.snd_notif            -  WARNING:  Notification sent <11: This is another test subject> <This is another message body>
      demo-smtp.dotest               -  WARNING:    RETURNED:
None
      demo-smtp.dotest               -  WARNING:  

==============================================================================================
Test 12 - No body, filename, or htmlfile
  GIVEN:      (), {'to': 'EmailTo', 'log': True}
  EXPECT:     SndEmailError ... No body, filename, or htmlfile specified.
      demo-smtp.dotest               -    ERROR:  
  RAISED:     SndEmailError: snd_email - Message subject <12: No body, filename, or htmlfile>:  No body, filename, or htmlfile specified.
      demo-smtp.dotest               -  WARNING:  

==============================================================================================
Test 13 - Empty to=
  GIVEN:      (), {'to': '', 'body': 'Hello', 'log': True}
  EXPECT:     SndEmailError ... <> is not a valid email address
      demo-smtp.dotest               -    ERROR:  
  RAISED:     SndEmailError: Message subject <13: Empty to=>:  <> is not a valid email address
      demo-smtp.dotest               -  WARNING:  

==============================================================================================
Test 14 - Invalid to='inval@i^*#d
  GIVEN:      (), {'to': 'inval@i^*#d', 'body': 'Hello', 'log': True}
  EXPECT:     SndEmailError ... The recipient address <inval@i^*#d> is not a valid RFC 5321 address
           SMTP.snd_email            -    DEBUG:  Initialize the SMTP server connection for port <p587tls>
           SMTP.snd_email            -    DEBUG:  Start TLS
           SMTP.snd_email            -    DEBUG:  Logging into SMTP server
           SMTP.snd_email            -    DEBUG:  Sending message <14: Invalid to='inval@i^*#d>
           SMTP.snd_email            -    DEBUG:  Email send try 0 failed.  Retry in <2.0 sec>:
  <{'inval@i^*#d': (553, b'5.1.3 The recipient address <inval@i^*#d> is not a valid RFC 5321 address.\n5.1.3 For more information, go to\n5.1.3  https://support.google.com/a/answer/3221692 and review RFC 5321\n5.1.3 specifications. 586e51a60fabf-3dff46fa5afsm1884421fac.5 - gsmtp')}>
           SMTP.snd_email            -    DEBUG:  Initialize the SMTP server connection for port <p587tls>
           SMTP.snd_email            -    DEBUG:  Start TLS
           SMTP.snd_email            -    DEBUG:  Logging into SMTP server
           SMTP.snd_email            -    DEBUG:  Sending message <14: Invalid to='inval@i^*#d>
           SMTP.snd_email            -    DEBUG:  Email send try 1 failed.  Retry in <2.0 sec>:
  <{'inval@i^*#d': (553, b'5.1.3 The recipient address <inval@i^*#d> is not a valid RFC 5321 address.\n5.1.3 For more information, go to\n5.1.3  https://support.google.com/a/answer/3221692 and review RFC 5321\n5.1.3 specifications. 46e09a7af769-7c6cbb2364dsm1010687a34.3 - gsmtp')}>
           SMTP.snd_email            -    DEBUG:  Initialize the SMTP server connection for port <p587tls>
           SMTP.snd_email            -    DEBUG:  Start TLS
           SMTP.snd_email            -    DEBUG:  Logging into SMTP server
           SMTP.snd_email            -    DEBUG:  Sending message <14: Invalid to='inval@i^*#d>
      demo-smtp.dotest               -    ERROR:  
  RAISED:     SndEmailError: snd_email:  Send failed for <14: Invalid to='inval@i^*#d>:
  <{'inval@i^*#d': (553, b'5.1.3 The recipient address <inval@i^*#d> is not a valid RFC 5321 address.\n5.1.3 For more information, go to\n5.1.3  https://support.google.com/a/answer/3221692 and review RFC 5321\n5.1.3 specifications. 46e09a7af769-7c6c24703bfsm1701158a34.12 - gsmtp')}>
      demo-smtp.dotest               -  WARNING:  

==============================================================================================
Test 15 - Failed email server
  GIVEN:      (), {'to': 'EmailTo', 'body': 'To be, or not to be...', 'log': True}
  EXPECT:     SndEmailError ... <[Errno -2] Name or service not known> / <[Errno 11001] getaddrinfo failed>
           SMTP.snd_email            -    DEBUG:  Initialize the SMTP server connection for port <p587tls>
           SMTP.snd_email            -    DEBUG:  Email send try 0 failed.  Retry in <2.0 sec>:
  <[Errno -2] Name or service not known>
           SMTP.snd_email            -    DEBUG:  Initialize the SMTP server connection for port <p587tls>
           SMTP.snd_email            -    DEBUG:  Email send try 1 failed.  Retry in <2.0 sec>:
  <[Errno -2] Name or service not known>
           SMTP.snd_email            -    DEBUG:  Initialize the SMTP server connection for port <p587tls>
      demo-smtp.dotest               -    ERROR:  
  RAISED:     SndEmailError: snd_email:  Send failed for <15: Failed email server>:
  <[Errno -2] Name or service not known>
      demo-smtp.dotest               -  WARNING:  

==============================================================================================
Test 16 - Bad server port
  GIVEN:      (), {'to': 'EmailTo', 'body': 'To be, or not to be...', 'log': True}
  EXPECT:     SndEmailError ... Config EmailServerPort <badport> is invalid
      demo-smtp.dotest               -    ERROR:  
  RAISED:     SndEmailError: snd_email - Config EmailServerPort <badport> is invalid
      demo-smtp.dotest               -  WARNING:  

==============================================================================================
Test 17 - snd_notif Failed email server
  GIVEN:      (), {'msg': 'This is the message body'}
  EXPECT:     SndEmailError ... <[Errno -2] Name or service not known> / <[Errno 11001] getaddrinfo failed>
           SMTP.snd_email            -    DEBUG:  Initialize the SMTP server connection for port <p587tls>
           SMTP.snd_email            -    DEBUG:  Email send try 0 failed.  Retry in <0.5 sec>:
  <[Errno -2] Name or service not known>
           SMTP.snd_email            -    DEBUG:  Initialize the SMTP server connection for port <p587tls>
      demo-smtp.dotest               -    ERROR:  
  RAISED:     SndEmailError: snd_email:  Send failed for <17: snd_notif Failed email server>:
  <[Errno -2] Name or service not known>


=====  Test 18:  list_to tests  =====
1:   Single email address                ['me@home']
2:   Multiple email addresses            ['me@home', 'you@home', 'me@example.com']
3:   Single number                       ['+14805551212']
3a:  Single number with cc               ['+14805551212']
3b:  Single number int                   ['+14805551212']
4:   Multiple numbers                    ['+14805551212', '+14805551213']
5:   Email-to-SMS addresses              ['4805551212@vzwpix.com', '4805551213@txt.att.net']
6:   Numbers from email addresses        ['+14805551212', '+14805551213']
7:   Other country code                  ['+14805551212', '+4448055512']
Exception:  Message subject <8:   Number too short>:  <480555121> is not a valid phone number
Exception:  Message subject <8a:  Number too long>:  <480222555121> is not a valid phone number
Exception:  Message subject <8b:  Int Number too long>:  <480222555121> is not a valid phone number
Exception:  Message subject <9:   Invalid phone number>:  <480a555121> is not a valid phone number
Exception:  Message subject <10:  No phone number>:  <> is not a valid phone number
Exception:  Message subject <11:  No email address>:  <> is not a valid email address
Exception:  Message subject <12:  Invalid mode>:  <emailsX> is not a valid get_type for list_to()
20:  README example                      ['+14805551212', '+14805551213', '+14805551214', '+44123456']
